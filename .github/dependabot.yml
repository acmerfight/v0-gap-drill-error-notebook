# 🤖 Dependabot 自动化依赖管理配置
# 
# 功能说明:
# 1. 自动检测过时依赖包并创建更新 PR
# 2. 监控安全漏洞并及时修复
# 3. 智能合并策略，减少维护工作量
# 4. 与现有 CI/CD 流程无缝集成

version: 2
updates:
  # npm 依赖包更新配置
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "daily"
      time: "09:00"
      timezone: "Asia/Shanghai"
    
    # PR 管理策略
    open-pull-requests-limit: 10
    pull-request-branch-name:
      separator: "/"
    
    # 提交信息配置
    commit-message:
      prefix: "🔧 deps"
      prefix-development: "🔧 deps-dev"
      include: "scope"
    
    # 自动合并配置 (仅补丁级更新)
    allow:
      - dependency-type: "direct"
        update-type: "version-update:semver-patch"
      - dependency-type: "indirect"
        update-type: "version-update:semver-patch"
    
    # 忽略特定依赖包 (如果需要锁定版本)
    ignore:
      # Next.js 主要版本更新需要手动测试
      - dependency-name: "next"
        update-types: ["version-update:semver-major"]
      
      # React 主要版本更新需要手动测试  
      - dependency-name: "react"
        update-types: ["version-update:semver-major"]
      - dependency-name: "react-dom"
        update-types: ["version-update:semver-major"]
    
    # PR 标签
    labels:
      - "dependencies"
      - "auto-merge-candidate"
    
    # 审核者配置 (可选)
    reviewers:
      - "acmerfight"
    
    # 里程碑配置 (可选) 
    milestone: 1
    
    # 分组更新策略
    groups:
      # React 生态系统
      react:
        patterns:
          - "react*"
          - "@types/react*"
        
      # Radix UI 组件库
      radix-ui:
        patterns:
          - "@radix-ui/*"
        
      # 开发工具
      dev-tools:
        dependency-type: "development"
        patterns:
          - "eslint*"
          - "@typescript-eslint/*"
          - "typescript"
          - "@types/*"
        
      # 安全更新 (高优先级)
      security-updates:
        dependency-type: "production"
        update-types:
          - "security"

  # GitHub Actions 工作流更新
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00" 
      timezone: "Asia/Shanghai"
    
    commit-message:
      prefix: "🔧 ci"
      include: "scope"
    
    labels:
      - "github-actions"
      - "auto-merge-candidate"
    
    reviewers:
      - "acmerfight"